<?php if(!is_null($bannerImage)): ?>
    <div class="parallax-container">
        <div class="parallax"><img src="<?= $bannerImage ?>" alt="Banner Image"></div>
    </div>
<?php endif;?>

<div class="section white">
    <div class="row container">
        <div class="col l12 m12 s12">
            <img src="/images/<?= strtolower(implode('-', explode('_', $townParam))) ?>.jpg" class="responsive-img" alt="banner"/>
            
            <p style="white-space: pre-line; text-align: justify; margin-top: 0px; padding-top: 0px;">
                <?= strlen(trim($town['description'])) ? trim($town['description']) : "To be defined." ?>
            </p>
            
            <ul class="collapsible expandable">
                <li>
                    <div class="collapsible-header"><i class="material-icons">commute</i>How to get there?</div>
                    <div class="collapsible-body">
                        <span style="white-space: pre-line; text-align: justify; padding-top: 0px;">
                            <?= strlen(trim($town['commuterGuide'])) ? $town['commuterGuide'] : "<i>To be defined.</i>" ?>
                        </span>
                    </div>
                </li>
                <li>
                    <div class="collapsible-header"><i class="material-icons">info</i>Other Details</div>
                    <div class="collapsible-body">
                        <span style="white-space: pre-line; text-align: justify; margin-top: 0px;">
                            <?= strlen(trim($town['otherDetails'])) ? $town['otherDetails'] : "<i>To be defined.</i>" ?>
                        </span>
                    </div>
                </li>
                <li>
                    <div class="collapsible-header"><i class="material-icons">near_me</i>Places of Interest</div>
                    <div class="collapsible-body">
                        <p>You can view the places of interest in this destination <a href="https://www.google.com/maps/search/?api=1&query=<?= $poiQuery?>" target="_blank">here.</a></p>
                    </div>
                </li>
                <li>
                    <div class="collapsible-header"><i class="material-icons">photo_camera</i>Tourist Destinations</div>
                    <div class="collapsible-body">
                        <?php if (count($places) > 0): ?>
                            <?php foreach($places as $place): ?>
                                <div class="card-panel">
                                    <div class="row">
                                        <div class="col l2 m2 s4">
                                            <img src="<?= $place['imageName'] ?>" class="responsive-img">
                                        </div>
                                        <div class="col l10 m10 s8">
                                            <span style="font-weight: bold; display: block"><?= $place['name'] ?></span>
                                            <?php if ($place['arEnabled'] == 1): ?>
                                                <div class="chip blue lighten-1"><img src="/images/ar-enabled.png"/>AR Enabled</div>
                                            <?php endif;?>
                                            <p class="truncate"><?= $place['description'] ?></p>
                                            <a href="/place/<?= $place['id']?>">View Destination</a>
                                        </div>
                                    </div>
                                </div>
                            <?php endforeach;?>
                        <?php else:?>
                            <p style="font-weight: bold">No Tourist Destinations available.</p>
                        <?php endif;?>
                    </div>
                </li>
                <li>
                    <div class="collapsible-header"><i class="material-icons">local_offer</i>Products</div>
                    <div class="collapsible-body">
                        <?php if (count($products) > 0): ?>
                            <?php foreach($products as $product): ?>
                                <div class="card-panel">
                                    <div class="row">
                                        <div class="col l2 m2 s4">
                                            <img src="<?= $product['imageFile'] ?>" class="responsive-img">
                                        </div>
                                        <div class="col l10 m10 s8">
                                            <span style="font-weight: bold; display: block"><?= $product['name'] ?></span>
                                            <?php if (strlen(trim($product['arLink'])) > 0): ?>
                                                <div class="chip blue lighten-1"><img src="/images/ar-enabled.png"/>AR Enabled</div>
                                            <?php endif;?>
                                            <p class="truncate"><?= $product['description'] ?></p>
                                            <a href="/product/<?= $product['id']?>">View Product</a>
                                        </div>
                                    </div>
                                </div>
                            <?php endforeach;?>
                        <?php else:?>
                            <p style="font-weight: bold">No Products available.</p>
                        <?php endif;?>
                    </div>
                </li>
                <li class="hide">
                    <div class="collapsible-header"><i class="material-icons">bar_chart</i>Open Data</div>
                    <div class="collapsible-body">
                        <p>You can view the open data for <?= $town['name']?> <a href="/open-data/<?= $townParam?>">here.</a></p>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $('.parallax').parallax();
        $('.collapsible').collapsible({
            accordion: false
        });
        $(".materialboxed").materialbox();
    });
</script>